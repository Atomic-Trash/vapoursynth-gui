<Application x:Class="VapourSynthPortable.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:helpers="clr-namespace:VapourSynthPortable.Helpers"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Design System -->
                <ResourceDictionary Source="Styles/DesignTokens.xaml"/>
                <ResourceDictionary Source="Styles/Buttons.xaml"/>
                <ResourceDictionary Source="Styles/FormControls.xaml"/>
                <ResourceDictionary Source="Styles/Cards.xaml"/>
                <ResourceDictionary Source="Styles/Panels.xaml"/>
                <!-- Accessibility -->
                <ResourceDictionary Source="Styles/HighContrast.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <!-- ═══════════════════════════════════════════════════════════════════════════
                 CONVERTERS
                 ═══════════════════════════════════════════════════════════════════════════ -->
            <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
            <helpers:CountToVisibilityConverter x:Key="CountToVis"/>
            <helpers:StringToVisibilityConverter x:Key="StringToVis"/>
            <helpers:NullToVisibilityConverter x:Key="NullToVis"/>
            <helpers:BoolToBorderBrushConverter x:Key="BoolToBorderBrush"/>
            <helpers:InverseBoolConverter x:Key="InverseBool"/>
            <helpers:NullToBoolConverter x:Key="NullToBool"/>
            <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            <helpers:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
            <helpers:StringToBoolConverter x:Key="StringToBoolConverter"/>
            <helpers:ColorToBrushConverter x:Key="ColorToBrushConverter"/>
            <helpers:FrameToPixelConverter x:Key="FrameToPixelConverter"/>
            <helpers:TrackTypeToMuteTooltipConverter x:Key="TrackTypeToMuteTooltipConverter"/>
            <helpers:EnumBoolConverter x:Key="EnumBoolConverter"/>
            <helpers:WipeVisibilityConverter x:Key="WipeVisibilityConverter"/>
            <helpers:BoolToFavoriteColorConverter x:Key="BoolToFavoriteColorConverter"/>
            <helpers:SortDirectionToArrowConverter x:Key="SortDirectionToArrowConverter"/>
            <helpers:EnumToVisibilityConverter x:Key="EnumToVisibilityConverter"/>
            <helpers:StringToVisibilityMatchConverter x:Key="StringToVisibilityMatchConverter"/>
            <helpers:BoolToFavoriteIconConverter x:Key="BoolToFavoriteIconConverter"/>
            <helpers:NullOrEmptyToVisibilityConverter x:Key="NullOrEmptyToVisibilityConverter"/>
            <helpers:CountToVisibilityInverseConverter x:Key="CountToVisInverse"/>
            <helpers:TimeSpanToVisibilityConverter x:Key="TimeSpanToVisibilityConverter"/>
            <helpers:WipeRectConverter x:Key="WipeRectConverter"/>
            <helpers:WipeLineMarginConverter x:Key="WipeLineMarginConverter"/>
            <helpers:StatusToBackgroundConverter x:Key="StatusToBackgroundConverter"/>
            <helpers:StatusToForegroundConverter x:Key="StatusToForegroundConverter"/>
            <helpers:BoolToPauseIconConverter x:Key="BoolToPauseIconConverter"/>
            <helpers:BoolToPauseColorConverter x:Key="BoolToPauseColorConverter"/>
            <helpers:BoolToPauseTooltipConverter x:Key="BoolToPauseTooltipConverter"/>
            <helpers:BoolToPauseLabelConverter x:Key="BoolToPauseLabelConverter"/>
            <helpers:BoolToToggleLabelConverter x:Key="BoolToToggleLabelConverter"/>
            <helpers:BoolToToggleColorConverter x:Key="BoolToToggleColorConverter"/>
            <helpers:StringToDoubleConverter x:Key="StringToDoubleConverter"/>
            <helpers:StringToBooleanConverter x:Key="StringToBooleanConverter"/>
            <helpers:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
            <helpers:SourceTypeToIconConverter x:Key="SourceTypeToIconConverter"/>

            <!-- ═══════════════════════════════════════════════════════════════════════════
                 FONTS
                 ═══════════════════════════════════════════════════════════════════════════ -->
            <FontFamily x:Key="InterRegular">pack://application:,,,/Assets/Fonts/#Inter</FontFamily>
            <FontFamily x:Key="InterMedium">pack://application:,,,/Assets/Fonts/#Inter Medium</FontFamily>
            <FontFamily x:Key="InterSemiBold">pack://application:,,,/Assets/Fonts/#Inter SemiBold</FontFamily>
            <FontFamily x:Key="InterBold">pack://application:,,,/Assets/Fonts/#Inter Bold</FontFamily>
            <!-- Icon Font with fallbacks for system icons -->
            <FontFamily x:Key="IconFont">Segoe MDL2 Assets, Segoe UI Symbol, Segoe UI Emoji</FontFamily>

            <!-- ═══════════════════════════════════════════════════════════════════════════
                 GLOBAL FONT STYLES (Applied to all instances of these controls)
                 ═══════════════════════════════════════════════════════════════════════════ -->
            <Style TargetType="TextBlock">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="TextBox">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="Label">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="Button">
                <Setter Property="FontFamily" Value="{StaticResource InterMedium}"/>
            </Style>
            <Style TargetType="ToggleButton">
                <Setter Property="FontFamily" Value="{StaticResource InterMedium}"/>
            </Style>
            <Style TargetType="RadioButton">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="CheckBox">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="ComboBox">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="ListBox">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="ListView">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>
            <Style TargetType="MenuItem">
                <Setter Property="FontFamily" Value="{StaticResource InterRegular}"/>
            </Style>

            <!-- ═══════════════════════════════════════════════════════════════════════════
                 LEGACY STYLES (For backwards compatibility during migration)
                 TODO: Remove these after all pages are updated to use new design tokens
                 ═══════════════════════════════════════════════════════════════════════════ -->

            <!-- Legacy color aliases (map old names to new tokens) -->
            <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryHoverColor}"/>
            <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource ContentBackgroundColor}"/>
            <SolidColorBrush x:Key="SurfaceBrush" Color="{StaticResource ElevatedBackgroundColor}"/>
            <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextPrimaryColor}"/>
            <SolidColorBrush x:Key="TextMutedBrush" Color="{StaticResource TextMutedColor}"/>

            <!-- Track Toggle Button Style (for timeline M/S/L buttons) -->
            <Style x:Key="TrackToggleButton" TargetType="ToggleButton">
                <Setter Property="Background" Value="{StaticResource CardBackground}"/>
                <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    BorderBrush="Transparent" BorderThickness="1"
                                    CornerRadius="{StaticResource RadiusXS}" Padding="2">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource ErrorBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource ElevatedBackground}"/>
                                </Trigger>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsMouseOver" Value="True"/>
                                        <Condition Property="IsChecked" Value="True"/>
                                    </MultiTrigger.Conditions>
                                    <Setter TargetName="border" Property="Background">
                                        <Setter.Value>
                                            <SolidColorBrush Color="#D06060"/>
                                        </Setter.Value>
                                    </Setter>
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Preset Card Style (for RestorePage presets list) -->
            <Style x:Key="PresetCardStyle" TargetType="Border">
                <Setter Property="Background" Value="{StaticResource PanelBackground}"/>
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="CornerRadius" Value="{StaticResource RadiusM}"/>
                <Setter Property="Padding" Value="{StaticResource PaddingM}"/>
                <Setter Property="Margin" Value="4,2"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource CardBackground}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource TextDisabled}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!-- Queue Card Style -->
            <Style x:Key="QueueCardStyle" TargetType="Border">
                <Setter Property="Background" Value="{StaticResource PanelBackground}"/>
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="CornerRadius" Value="{StaticResource RadiusM}"/>
                <Setter Property="Padding" Value="{StaticResource PaddingS}"/>
                <Setter Property="Margin" Value="4,2"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource CardBackground}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

            <!-- Category Pill Button Style (for RestorePage tabs) -->
            <Style x:Key="CategoryPillButton" TargetType="RadioButton">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="12,6"/>
                <Setter Property="Margin" Value="2,0"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="FontSize" Value="{StaticResource FontSizeSmall}"/>
                <Setter Property="FontFamily" Value="{StaticResource InterMedium}"/>
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="RadioButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    BorderBrush="Transparent" BorderThickness="1"
                                    CornerRadius="{StaticResource RadiusXL}"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource SelectionBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource ElevatedBackground}"/>
                                </Trigger>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsMouseOver" Value="True"/>
                                        <Condition Property="IsChecked" Value="True"/>
                                    </MultiTrigger.Conditions>
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource SelectionHoverBrush}"/>
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Icon Button Style (minimal, transparent) -->
            <Style x:Key="IconButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="{StaticResource PaddingXS}"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    BorderBrush="Transparent" BorderThickness="1"
                                    CornerRadius="{StaticResource RadiusXS}"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource ElevatedBackground}"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource CardBackground}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.4"/>
                                </Trigger>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Application.Resources>
</Application>
